version: '3'
services:
    jaeger:
        image: jaegertracing/all-in-one:latest
        restart: always
        container_name: jaeger
        environment:
            - COLLECTOR_ZIPKIN_HTTP_PORT=9411
        ports:
        - 5775:5775/udp
        - 6831:6831/udp
        - 6832:6832/udp
        - 5778:5778
        - 16686:16686
        - 14268:14268
        - 9411:9411
    swagger:
        image: swaggerapi/swagger-ui:latest
        restart: always
        container_name: swagger
        volumes:
            - ./common/swagger:/usr/share/nginx/html/swagger
        ports:
            - 9095:8080
    api-gateway-srv:
        restart: always
        container_name: api-gateway-srv
        build:
            dockerfile: ./srvs/gateway/Dockerfile
        command: ""
        volumes:
            - ./config/:/opt/config/
        ports:
            - 8081:8081
            - 9091:9091
    api-hello-srv:
        restart: always
        container_name: api-hello-srv
        build:
            dockerfile: ./srvs/hello/Dockerfile
        command: ""
        volumes:
            - ./config/:/opt/config/
        ports:
            - 9507:9507
    api-project-srv:
        restart: always
        container_name: api-project-srv
        build:
            dockerfile: ./srvs/project/Dockerfile
        command: ""
        volumes:
            - ./config/:/opt/config/
        ports:
            - 9508:9508
    api-liveroom-srv:
        restart: always
        container_name: api-liveroom-srv
        build:
            dockerfile: ./srvs/liveroom/Dockerfile
        command: ""
        volumes:
            - ./config/:/opt/config/
        ports:
            - 9509:9509
